<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Match me!</title>

<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Nico+Moji&display=swap" rel="stylesheet" />

<style>
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Comic Neue', cursive;
    background: #f0f0f0;
    margin: 0; padding: 1rem;
    color: #333;
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark-mode {
    background-color: #121212;
    color: #ddd;
  }
  h1 {
    text-align: center;
    color: #00695c;
    margin-bottom: 1rem;
  }
  #dark-mode-toggle {
    position: fixed;
    top: 15px;
    right: 15px;
    background: #00796b;
    color: white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transition: background-color 0.3s;
    user-select: none;
    z-index: 9999;
  }
  #dark-mode-toggle:hover {
    background-color: #004d40;
  }
  .hidden {
    display: none;
  }

  /* Start screen */
  #start-screen {
    max-width: 600px;
    margin: 0 auto 2rem;
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 12px rgba(0,0,0,0.1);
  }
  #start-screen.dark-mode {
    background: #1f1f1f;
    box-shadow: 0 2px 12px rgba(0,0,0,0.9);
  }
  .set-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.7rem;
    justify-content: center;
  }
  .set-buttons button {
    padding: 0.6rem 1.2rem;
    background: #00796b;
    color: white;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-family: 'Comic Neue', cursive;
    transition: background-color 0.3s, transform 0.2s;
  }
  .set-buttons button:hover {
    background-color: #004d40;
    transform: scale(1.05);
  }

  /* Word selection screen */
  #word-selection-screen {
    max-width: 900px;
    margin: 0 auto 2rem;
    background: white;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 2px 12px rgba(0,0,0,0.1);
    user-select: none;
  }
  #word-selection-screen.dark-mode {
    background: #1f1f1f;
    box-shadow: 0 2px 12px rgba(0,0,0,0.9);
  }

  #word-selection-screen h2 {
    text-align: center;
    margin-bottom: 1rem;
    font-family: 'Comic Neue', cursive;
  }

  /* Four columns layout */
  #word-columns {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    gap: 1rem;
    max-height: 500px;
    overflow-y: auto;
  }

  /* Column Titles */
  .column-title {
    font-weight: bold;
    font-family: 'Comic Neue', cursive;
    text-align: center;
    margin-bottom: 0.5rem;
    color: #004d40;
  }
  body.dark-mode .column-title {
    color: #a5d6a7;
  }

  /* English draggable words */
  .english-word {
    background: #d0e8e4;
    padding: 8px 12px;
    margin: 6px 0;
    border-radius: 10px;
    cursor: grab;
    user-select: none;
    font-family: 'Nico Moji', monospace;
    font-size: 1.1rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    transition: background-color 0.3s;
    text-align: center;
  }
  .english-word.dragging {
    opacity: 0.5;
  }
  body.dark-mode .english-word {
    background: #336655;
    box-shadow: 0 2px 4px rgba(0,0,0,0.6);
    color: #cce4d6;
  }

  /* Japanese drop targets */
  .japanese-word {
    background: #a2cfc4;
    padding: 12px 16px;
    margin: 6px 0;
    border-radius: 12px;
    border: 2px dashed #00796b;
    font-size: 1.3rem;
    font-family: 'Comic Neue', cursive;
    text-align: center;
    user-select: none;
    min-height: 44px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .japanese-word.correct {
    background-color: #a5d6a7;
    border-color: #2e7d32;
    color: #2e7d32;
  }
  .japanese-word.incorrect {
    animation: shake 0.5s;
    border-color: #e53935;
  }
  body.dark-mode .japanese-word {
    background: #225544;
    border-color: #4caf50;
    color: #a5d6a7;
  }
  body.dark-mode .japanese-word.correct {
    background-color: #4caf50;
    border-color: #2e7d32;
    color: #1b3d1a;
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-8px); }
    40%, 80% { transform: translateX(8px); }
  }

  /* Navigation */
  #nav-buttons {
    display: flex;
    justify-content: center;
    margin-top: 1rem;
    gap: 1rem;
  }
  #nav-buttons button {
    padding: 0.6rem 1.2rem;
    background: #00796b;
    color: white;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-family: 'Comic Neue', cursive;
    transition: background-color 0.3s, transform 0.2s;
  }
  #nav-buttons button:hover {
    background-color: #004d40;
    transform: scale(1.05);
  }

  /* Game screen (where drag English ‚Üí drop Japanese) */
  #game-screen {
    max-width: 700px;
    margin: 0 auto;
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 12px rgba(0,0,0,0.1);
    user-select: none;
  }
  #game-screen.dark-mode {
    background: #1f1f1f;
    box-shadow: 0 2px 12px rgba(0,0,0,0.9);
  }

  #progress-container {
    width: 80%;
    height: 20px;
    background: #ddd;
    border-radius: 10px;
    margin: 0 auto 0.5rem auto;
    overflow: hidden;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
  }
  body.dark-mode #progress-container {
    background: #333;
    box-shadow: inset 0 0 5px rgba(255,255,255,0.1);
  }
  #progress-bar {
    height: 100%;
    width: 100%;
    background-color: #00796b;
    transition: width 1s linear;
  }
  body.dark-mode #progress-bar {
    background-color: #4caf50;
  }

  #timer {
    font-family: 'Nico Moji', monospace;
    font-weight: bold;
    font-size: 1.3rem;
    text-align: center;
    margin-bottom: 1rem;
    color: #004d40;
    transition: color 0.3s;
  }
  body.dark-mode #timer {
    color: #a5d6a7;
  }
  #timer.pulse {
    animation: pulseRed 1s infinite alternate;
    color: #e53935 !important;
  }
  @keyframes pulseRed {
    0% { color: #004d40; }
    100% { color: #e53935; }
  }

  #score-container {
    font-weight: bold;
    font-size: 1.4rem;
    color: #2e7d32;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 1rem;
  }
  body.dark-mode #score-container {
    color: #a5d6a7;
  }
  #money-amount {
    font-size: 1.6rem;
    color: #f9a825;
  }
  #piggy-bank {
    width: 60px;
    height: 50px;
    transition: transform 0.3s ease;
  }

  #word-lists {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 2rem;
    margin-top: 1rem;
  }

  /* Drop zones for Japanese words */
  .drop-zone {
    flex: 1 1 45%;
    min-height: 320px;
    background: #a2cfc4;
    border-radius: 12px;
    padding: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
    overflow-y: auto;
  }
  body.dark-mode .drop-zone {
    background: #225544;
    box-shadow: 0 0 8px rgba(255,255,255,0.1);
  }

  /* Coin animation */
  .coin {
    position: fixed;
    width: 25px;
    height: 25px;
    background: radial-gradient(circle at 12px 12px, #ffd700 0%, #b8860b 100%);
    border-radius: 50%;
    box-shadow: inset 0 0 8px #fff700;
    pointer-events: none;
    animation: fallCoin 1s ease forwards;
    z-index: 1000;
  }
  @keyframes fallCoin {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    80% { opacity: 1; }
    100% { transform: translateY(180px) scale(0.3); opacity: 0; }
  }

</style>
</head>
<body>

<div id="dark-mode-toggle" title="Toggle Dark Mode">üåô</div>

<!-- START SCREEN -->
<div id="start-screen" aria-label="Start screen">
  <h1>Match me!</h1>
  <div class="set-buttons" id="set-buttons" aria-label="Select vocabulary set"></div>
</div>

<!-- WORD SELECTION SCREEN -->
<div id="word-selection-screen" class="hidden" aria-label="Word selection screen">
  <h2 id="set-title">Vocabulary Set</h2>
  <div id="word-columns" aria-label="Vocabulary words divided into four columns">
    <div>
      <div class="column-title">English</div>
      <div id="english-col1"></div>
    </div>
    <div>
      <div class="column-title">English</div>
      <div id="english-col2"></div>
    </div>
    <div>
      <div class="column-title">Japanese</div>
      <div id="japanese-col1"></div>
    </div>
    <div>
      <div class="column-title">Japanese</div>
      <div id="japanese-col2"></div>
    </div>
  </div>
  <div id="nav-buttons">
    <button id="start-matching-btn">Start Matching</button>
    <button id="back-to-start-btn">Back</button>
  </div>
</div>

<!-- GAME SCREEN -->
<div id="game-screen" class="hidden" aria-live="polite" aria-label="Game screen">
  <div id="progress-container" aria-label="Time progress">
    <div id="progress-bar"></div>
  </div>
  <div id="timer">Time: 05:00</div>
  <div id="score-container" aria-live="polite">
    Money: <span id="money-amount">¬•0</span>
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Piggy_bank_icon.svg/64px-Piggy_bank_icon.svg.png" id="piggy-bank" alt="Piggy bank" />
  </div>
  <div id="word-lists">
    <div class="drop-zone" id="japanese-list" aria-label="Japanese words (drop targets)">
      <h3>Japanese Words</h3>
    </div>
    <div class="drop-zone" id="english-list" aria-label="English words (draggable)">
      <h3>English Words</h3>
    </div>
  </div>
</div>

<script>
  // Vocabulary data
  const vocabSets = {
    1: [
      {english:"minute", japanese:"ÂàÜ"},
      {english:"before", japanese:"„ÅÆÂâç„Å´"},
      {english:"photography", japanese:"ÂÜôÁúüÊíÆÂΩ±"},
      {english:"tournament", japanese:"„Éà„Éº„Éä„É°„É≥„Éà"},
      {english:"against", japanese:"„Å´ÂØæÊäó„Åó„Å¶"},
      {english:"lost", japanese:"Ë≤†„Åë„Å£„Åü"},
      {english:"lose", japanese:"Ë≤†„Åë„Çã"},
      {english:"final", japanese:"ÊúÄÂæå„ÅÆ"},
      {english:"second", japanese:"Áßí"},
      {english:"broke", japanese:"Â£ä„Åó„Åü"},
      {english:"surely", japanese:"Á¢∫„Åã„Å´"},
      {english:"until", japanese:"„ÄÇ„ÄÇ„ÄÇ„Åæ„Åß"},
      {english:"half", japanese:"ÂçäÂàÜ„ÅÆ"},
      {english:"hour", japanese:"ÔºëÊôÇÈñì"},
      {english:"tomorrow", japanese:"ÊòéÊó•"},
      {english:"today", japanese:"‰ªäÊó•"},
      {english:"yesterday", japanese:"Êò®Êó•"},
      {english:"ago", japanese:"ÔΩûÂâç„Å´"},
      {english:"spread", japanese:"Â∫É„ÇÅ„Çã"}
    ],
    2: [
      {english:"if", japanese:"„ÇÇ„Åó"},
      {english:"plastic", japanese:"„Éó„É©„Çπ„ÉÅ„ÉÉ„ÇØ"},
      {english:"exam", japanese:"„ÉÜ„Çπ„Éà"},
      {english:"adventure", japanese:"ÂÜíÈô∫"},
      {english:"read", japanese:"Ë™≠„ÇÄ"},
      {english:"main", japanese:"‰∏ª„Å™"},
      {english:"naughty", japanese:"„ÅÑ„Åü„Åö„Çâ„Å™"},
      {english:"trouble", japanese:"ÂøÉÈÖç„ÄÅÊÇ©„Åø„ÄÅ„ÇÑ„Å£„Åã„ÅÑ„Å™‰∫ãÊÖã"},
      {english:"lend", japanese:"Ë≤∏„Åô"},
      {english:"another", japanese:"„ÇÇ„ÅÜ‰∏Ä„Å§„ÅÆ"}
    ],
    3: [
      {english:"think", japanese:"ËÄÉ„Åà„Çã„ÉªÊÄù„ÅÜ"},
      {english:"author", japanese:"‰ΩúËÄÖ"},
      {english:"drew", japanese:"Êèè„ÅÑ„Åü"},
      {english:"scenery", japanese:"ÊôØËâ≤"},
      {english:"in fact", japanese:"‰ªä„Åæ„Åß"},
      {english:"area", japanese:"Âú∞Âüü"},
      {english:"still", japanese:"„Åæ„Å†"},
      {english:"hope", japanese:"Êúõ„ÇÄ"},
      {english:"someday", japanese:"„ÅÑ„Å§„Åã"},
      {english:"how", japanese:"„Å©„ÅÜ"},
      {english:"borrow", japanese:"ÂÄü„Çä„Çã"},
      {english:"fantasy", japanese:"„Éï„Ç°„É≥„Çø„Ç∏„Éº"},
      {english:"message", japanese:"„É°„ÉÉ„Çª„Éº„Ç∏"},
      {english:"horror", japanese:"„Éõ„É©„Éº"},
      {english:"novel", japanese:"Â∞èË™¨"},
      {english:"mystery", japanese:"„Éü„Çπ„ÉÜ„É™„Éº"},
      {english:"encourage", japanese:"Âä±„Åæ„Åô"}
    ],
    // ... (Add all other sets as needed)
  };

  // UI elements
  const startScreen = document.getElementById('start-screen');
  const wordSelectionScreen = document.getElementById('word-selection-screen');
  const gameScreen = document.getElementById('game-screen');

  const setButtonsDiv = document.getElementById('set-buttons');
  const setTitle = document.getElementById('set-title');

  const englishCol1 = document.getElementById('english-col1');
  const englishCol2 = document.getElementById('english-col2');
  const japaneseCol1 = document.getElementById('japanese-col1');
  const japaneseCol2 = document.getElementById('japanese-col2');

  const startMatchingBtn = document.getElementById('start-matching-btn');
  const backToStartBtn = document.getElementById('back-to-start-btn');

  const japaneseList = document.getElementById('japanese-list');
  const englishList = document.getElementById('english-list');

  const darkModeToggle = document.getElementById('dark-mode-toggle');

  const timerDisplay = document.getElementById('timer');
  const progressBar = document.getElementById('progress-bar');
  const moneyAmount = document.getElementById('money-amount');
  const piggyBank = document.getElementById('piggy-bank');

  // State variables
  let currentSetNumber = null;
  let currentSet = [];
  let matchedPairs = new Map();

  let totalTime = 300; // seconds
  let timeLeft = totalTime;
  let timerInterval = null;
  let money = 0;
  let darkMode = false;

  // Initialize start screen buttons
  function initStartScreen() {
    setButtonsDiv.innerHTML = '';
    for (const key in vocabSets) {
      const btn = document.createElement('button');
      btn.textContent = `Set ${key}`;
      btn.dataset.set = key;
      btn.addEventListener('click', () => {
        currentSetNumber = parseInt(btn.dataset.set);
        currentSet = vocabSets[currentSetNumber];
        openWordSelection();
      });
      setButtonsDiv.appendChild(btn);
    }
  }

  // Open word selection screen, show words in 4 columns
  function openWordSelection() {
    startScreen.classList.add('hidden');
    gameScreen.classList.add('hidden');
    wordSelectionScreen.classList.remove('hidden');

    setTitle.textContent = `Vocabulary Set ${currentSetNumber}`;

    // Clear previous
    englishCol1.innerHTML = '';
    englishCol2.innerHTML = '';
    japaneseCol1.innerHTML = '';
    japaneseCol2.innerHTML = '';

    // Split English and Japanese words into 2 columns each
    const englishWords = currentSet.map(pair => pair.english);
    const japaneseWords = currentSet.map(pair => pair.japanese);

    const halfEnglish = Math.ceil(englishWords.length / 2);
    const halfJapanese = Math.ceil(japaneseWords.length / 2);

    // Create English words divs (not draggable here)
    englishWords.slice(0, halfEnglish).forEach(word => {
      const div = document.createElement('div');
      div.textContent = word;
      div.className = 'english-word';
      englishCol1.appendChild(div);
    });
    englishWords.slice(halfEnglish).forEach(word => {
      const div = document.createElement('div');
      div.textContent = word;
      div.className = 'english-word';
      englishCol2.appendChild(div);
    });

    // Create Japanese words divs
    japaneseWords.slice(0, halfJapanese).forEach(word => {
      const div = document.createElement('div');
      div.textContent = word;
      div.className = 'japanese-word';
      japaneseCol1.appendChild(div);
    });
    japaneseWords.slice(halfJapanese).forEach(word => {
      const div = document.createElement('div');
      div.textContent = word;
      div.className = 'japanese-word';
      japaneseCol2.appendChild(div);
    });
  }

  // When Start Matching clicked, open game screen with drag/drop English->Japanese
  startMatchingBtn.addEventListener('click', () => {
    wordSelectionScreen.classList.add('hidden');
    gameScreen.classList.remove('hidden');
    resetGame();
    setupGame();
    startTimer();
  });

  // Back button from word selection to start screen
  backToStartBtn.addEventListener('click', () => {
    wordSelectionScreen.classList.add('hidden');
    startScreen.classList.remove('hidden');
  });

  // Setup game screen drag English words and drop on Japanese
  function setupGame() {
    matchedPairs.clear();
    money = 0;
    updateMoney();

    // Clear old words
    japaneseList.innerHTML = '<h3>Japanese Words</h3>';
    englishList.innerHTML = '<h3>English Words</h3>';

    // Prepare shuffled English and Japanese lists
    const englishWords = currentSet.map(pair => pair.english);
    const japaneseWords = currentSet.map(pair => pair.japanese);

    shuffleArray(englishWords);
    shuffleArray(japaneseWords);

    // Create English draggable words
    englishWords.forEach(word => {
      const div = document.createElement('div');
      div.textContent = word;
      div.className = 'english-word';
      div.draggable = true;
      div.id = 'eng-' + word;
      div.addEventListener('dragstart', dragStartEnglish);
      div.addEventListener('dragend', dragEndEnglish);
      englishList.appendChild(div);
    });

    // Create Japanese drop targets
    japaneseWords.forEach(word => {
      const div = document.createElement('div');
      div.textContent = word;
      div.className = 'japanese-word';
      div.dataset.japanese = word;
      div.addEventListener('dragover', dragOver);
      div.addEventListener('drop', dropOnJapanese);
      japaneseList.appendChild(div);
    });
  }

  // Shuffle helper
  function shuffleArray(arr) {
    for(let i = arr.length -1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  // Drag handlers for English words
  function dragStartEnglish(e) {
    e.dataTransfer.setData('text/plain', e.target.textContent);
    this.classList.add('dragging');
    playPronunciation(e.target.textContent);
  }
  function dragEndEnglish(e) {
    this.classList.remove('dragging');
  }

  // Play English pronunciation using Web Speech API
  function playPronunciation(text) {
    if (!window.speechSynthesis) return;
    speechSynthesis.cancel(); // cancel any previous
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'en-US';
    speechSynthesis.speak(utterance);
  }

  // Drag over Japanese drop zone
  function dragOver(e) {
    e.preventDefault();
  }

  // Drop English word on Japanese word
  function dropOnJapanese(e) {
    e.preventDefault();
    if (this.classList.contains('correct')) return; // already matched

    const draggedEnglish = e.dataTransfer.getData('text/plain');
    const japaneseWord = this.dataset.japanese;

    // Find correct Japanese for this English
    const correctPair = currentSet.find(pair => pair.english === draggedEnglish);
    if (!correctPair) return;

    if (correctPair.japanese === japaneseWord) {
      // Correct match
      matchedPairs.set(draggedEnglish, japaneseWord);
      this.classList.add('correct');
      this.textContent = `${japaneseWord} ‚úÖ`;

      // Remove dragged English word
      const engElem = document.getElementById('eng-' + draggedEnglish);
      if (engElem) engElem.remove();

      addMoney(10);
      confetti();

      if (matchedPairs.size === currentSet.length) {
        endGame(true);
      }
    } else {
      // Incorrect match
      this.classList.add('incorrect');
      setTimeout(() => {
        this.classList.remove('incorrect');
      }, 600);

      const engElem = document.getElementById('eng-' + draggedEnglish);
      if (engElem) {
        engElem.classList.add('shake');
        setTimeout(() => engElem.classList.remove('shake'), 600);
      }
    }
  }

  // Money and animation
  function addMoney(amount) {
    money += amount;
    updateMoney();
    dropCoin();
  }
  function updateMoney() {
    moneyAmount.textContent = `¬•${money}`;
  }
  function dropCoin() {
    const coin = document.createElement('div');
    coin.className = 'coin';
    document.body.appendChild(coin);

    // Start position: random English word position or center screen fallback
    const engWords = document.querySelectorAll('.english-word');
    let startRect;
    if (engWords.length > 0) {
      startRect = engWords[0].getBoundingClientRect();
    } else {
      startRect = {
        left: window.innerWidth / 2,
        top: window.innerHeight / 2,
        width: 20,
        height: 20
      };
    }
    coin.style.left = (startRect.left + startRect.width / 2) + 'px';
    coin.style.top = (startRect.top + startRect.height / 2) + 'px';

    const pigRect = piggyBank.getBoundingClientRect();
    const dx = pigRect.left + pigRect.width / 2 - (startRect.left + startRect.width / 2);
    const dy = pigRect.top + pigRect.height / 2 - (startRect.top + startRect.height / 2);

    coin.animate([
      { transform: 'translate(0,0) scale(1)', opacity: 1 },
      { transform: `translate(${dx}px, ${dy}px) scale(0.3)`, opacity: 0 }
    ], { duration: 1000, easing: 'ease-in-out' });

    setTimeout(() => coin.remove(), 1100);
  }

  // Timer functions
  function startTimer() {
    updateTimerDisplay();
    clearInterval(timerInterval);
    timeLeft = totalTime;
    timerInterval = setInterval(() => {
      timeLeft--;
      updateTimerDisplay();
      updateProgressBar();

      if (timeLeft <= 30) {
        timerDisplay.classList.add('pulse');
      } else {
        timerDisplay.classList.remove('pulse');
      }

      if (timeLeft <= 0) {
        endGame(false);
      }
    }, 1000);
  }
  function updateTimerDisplay() {
    const m = Math.floor(timeLeft / 60).toString().padStart(2,'0');
    const s = (timeLeft % 60).toString().padStart(2,'0');
    timerDisplay.textContent = `Time: ${m}:${s}`;
  }
  function updateProgressBar() {
    const percent = (timeLeft / totalTime) * 100;
    progressBar.style.width = percent + '%';
  }

  // End game
  function endGame(won) {
    clearInterval(timerInterval);
    if (won) {
      alert(`Congratulations! You matched all words and earned ¬•${money}.`);
    } else {
      alert(`Time's up! You earned ¬•${money}.`);
    }
    resetGame();
  }

  function resetGame() {
    matchedPairs.clear();
    japaneseList.innerHTML = '<h3>Japanese Words</h3>';
    englishList.innerHTML = '<h3>English Words</h3>';
    money = 0;
    updateMoney();
    timerDisplay.textContent = "Time: 05:00";
    progressBar.style.width = '100%';
    // Return to start screen for simplicity
    gameScreen.classList.add('hidden');
    startScreen.classList.remove('hidden');
  }

  // Confetti celebration (basic)
  function confetti() {
    // Minimal confetti fallback: small colored squares
    for (let i=0; i<20; i++) {
      const conf = document.createElement('div');
      conf.style.position = 'fixed';
      conf.style.width = '8px';
      conf.style.height = '8px';
      conf.style.backgroundColor = ['#ff595e','#1982c4','#6a4c93','#ffca3a','#8ac926'][Math.floor(Math.random()*5)];
      conf.style.left = (window.innerWidth/2 + (Math.random()*200-100)) + 'px';
      conf.style.top = (window.innerHeight/2 + (Math.random()*100-50)) + 'px';
      conf.style.opacity = 1;
      conf.style.borderRadius = '3px';
      conf.style.zIndex = 9999;
      document.body.appendChild(conf);
      conf.animate([
        { transform: `translateY(${Math.random()*100 + 50}px)`, opacity: 1 },
        { opacity: 0 }
      ], { duration: 800 + Math.random()*400, easing: 'ease-out' });
      setTimeout(() => conf.remove(), 1000);
    }
  }

  // Dark mode toggle
  darkModeToggle.addEventListener('click', () => {
    darkMode = !darkMode;
    document.body.classList.toggle('dark-mode', darkMode);
    startScreen.classList.toggle('dark-mode', darkMode);
    wordSelectionScreen.classList.toggle('dark-mode', darkMode);
    gameScreen.classList.toggle('dark-mode', darkMode);
    darkModeToggle.textContent = darkMode ? '‚òÄÔ∏è' : 'üåô';
  });

  // Initialize
  initStartScreen();

</script>
</body>
</html>
